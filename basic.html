<!DOCTYPE html>
<html>
<head>
    <title>Transimap</title>

    <link rel="stylesheet" href="src/leaflet.css"/>
    <link rel="stylesheet" href="src/leaflet.draw.css"/>

    <script src="src/leaflet-src.js"></script>

    <script src="src/Leaflet.draw.js"></script>
    <script src="src/Leaflet.Draw.Event.js"></script>

    <script src="src/edit/handler/Edit.Poly.js"></script>
    <script src="src/edit/handler/Edit.SimpleShape.js"></script>
    <script src="src/edit/handler/Edit.Rectangle.js"></script>
    <script src="src/edit/handler/Edit.Marker.js"></script>


    <script src="src/draw/handler/Draw.Feature.js"></script>
    <script src="src/draw/handler/Draw.Polyline.js"></script>
    <script src="src/draw/handler/Draw.Polygon.js"></script>
    <script src="src/draw/handler/Draw.SimpleShape.js"></script>
    <script src="src/draw/handler/Draw.Rectangle.js"></script>
    <script src="src/draw/handler/Draw.Circle.js"></script>
    <script src="src/draw/handler/Draw.Marker.js"></script>
    <script src="src/draw/handler/Draw.CircleMarker.js"></script>

    <script src="src/ext/TouchEvents.js"></script>
    <script src="src/ext/LatLngUtil.js"></script>
    <script src="src/ext/GeometryUtil.js"></script>
    <script src="src/ext/LineUtil.Intersect.js"></script>
    <script src="src/ext/Polyline.Intersect.js"></script>
    <script src="src/ext/Polygon.Intersect.js"></script>

    <script src="src/Control.Draw.js"></script>
    <script src="src/Tooltip.js"></script>
    <script src="src/Toolbar.js"></script>

    <script src="src/draw/DrawToolbar.js"></script>
    <script src="src/edit/EditToolbar.js"></script>
    <script src="src/edit/handler/EditToolbar.Edit.js"></script>
    <script src="src/edit/handler/EditToolbar.Delete.js"></script>
</head>
<body>
<div id="map" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%;"></div>
<script>
    var osmUrl = 'http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png'
    stamenUrl = 'https://{s}.tiles.mapbox.com/v3/mslee.h1kk2o6r/{z}/{x}/{y}.png'
    main = L.tileLayer(stamenUrl, {maxZoom: 18}),
    map = new L.Map('map', {
        layers: [main],
        center: [43.65009,3.57468],
        zoom: 10 
    }),
    overlay = L.tileLayer(osmUrl).addTo(map);
    overlay.getContainer().style.display = "none";
    var drawnItems = new L.FeatureGroup();
    map.addLayer(drawnItems);

    // Set the title to show on the polygon button
    L.drawLocal.draw.toolbar.buttons.polygon = 'Draw a polygon';

    var drawControl = new L.Control.Draw({
        position: 'topright',
        draw: {
            polyline: true,
            polygon: true,
            circle: true,
            marker: false,
            circlemarker : false,
            rectangle : false
        },
        edit: {
            featureGroup: drawnItems,
            remove: true
        }
    });
    map.addControl(drawControl);

    map.on(L.Draw.Event.CREATED, function (e) {
        var type = e.layerType,
                layer = e.layer;

       /* if (type === 'marker') {
            layer.bindPopup('A popup!');
        }*/

        drawnItems.addLayer(layer);
    });

    map.on(L.Draw.Event.EDITED, function (e) {
        var layers = e.layers;
        var countOfEditedLayers = 0;
        layers.eachLayer(function (layer) {
            countOfEditedLayers++;
        });
        console.log("Edited " + countOfEditedLayers + " layers");
    });
/*
    L.DomUtil.get('changeColor').onclick = function () {
        drawControl.setDrawingOptions({rectangle: {shapeOptions: {color: '#004a80'}}});
    };*/

</script>
</body>
</html>
